<div class="container m-4">

  <h1>Hello, <strong> <%= current_user.first_name %> <%= current_user.last_name %> </strong></h1>

  <div>
    <h3>Your rental homes:</h3>
    <p> <% @places.each do |place| %></p>
      <p><%= place.name %><p>
      <% end %>
  </div>

  <div>
  <h2>Your accepted, pending and refused bookings for your rentals: </h2>
      <table class="table table-striped">
      <thead>
          <tr>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Guests</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
      </thead>
      <tbody>
      <% @places.each do |place| %>
      <% place.bookings.each do |booking| %>
            <tr>
              <td><%= booking.date_start.strftime('%d %b %Y') %></td>
              <td><%= booking.date_end.strftime('%d %b %Y') %></td>
              <td><%= booking.nb_of_guests %></td>
              <td><%= "This booking is: #{booking.status}"%><td>
              <button><%= link_to "Accept", accept_path(booking), data: { turbo_method: "PATCH", turbo_confirm: "You accepted the booking successfully!" }%></button>
              <button><%= link_to "Refuse", refuse_path(booking), data: { turbo_method: "PATCH", turbo_confirm: "You refused the booking successfully!" } %></button>
              <td><%= link_to "Edit", edit_booking_path(booking), class: "btn btn-sm btn-warning" %></td>
              <td>
                <%= link_to "X", booking_path(booking),
                  data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                  class: "btn btn-sm btn-danger" %>
              </td>
            </tr>
        <% end %>
   <% end %>
   </tbody>
   </table>

  <h2>Your upcoming travels: </h2>
  <table class="table table-striped">
      <thead>
          <tr>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Guests</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
      </thead>
      <tbody>
   <% @booking_travels.each do |booking| %>
      <tr>
        <td><%= booking.date_start.strftime('%d %b %Y') %></td>
        <td><%= booking.date_end.strftime('%d %b %Y') %></td>
        <td><%= booking.nb_of_guests %></td>
        <td><%= "This booking is: #{booking.status}"%><td>
        <button><%= link_to "Accept", accept_path(booking), data: { turbo_method: "PATCH", turbo_confirm: "You accepted the booking successfully!" }%></button>
        <button><%= link_to "Refuse", refuse_path(booking), data: { turbo_method: "PATCH", turbo_confirm: "You refused the booking successfully!" } %></button>
        <td><%= link_to "Edit", edit_booking_path(booking), class: "btn btn-sm btn-warning" %></td>
        <td>
          <%= link_to "X", booking_path(booking),
            data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
            class: "btn btn-sm btn-danger" %>
        </td>
      </tr>
    <% end %>
       </tbody>
      </table>
</div>
